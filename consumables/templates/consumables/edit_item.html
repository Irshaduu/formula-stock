{% extends 'consumables/base.html' %}

{% block content %}

<h2>Edit {{ item.name }}</h2>

<form method="post">
    {% csrf_token %}

    {% if subcategories %}
    <label style="display: block; color: var(--text-secondary);">SubCategory (Optional)</label>
    <select name="subcategory" required
        style="width: 100%; margin-bottom: 15px; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text-primary);">
        <option value="" disabled>Select SubCategory...</option>
        {% for sub in subcategories %}
        <option value="{{ sub.id }}" {% if item.subcategory_id == sub.id %}selected{% endif %}>{{ sub.name }}</option>
        {% endfor %}
        <option value="DIRECT" style="color: #ef4444;" {% if not item.subcategory_id %}selected{% endif %}>-- None
            (Direct in Main Category) --</option>
    </select>
    {% endif %}

    <label style="display: block; color: var(--text-secondary);">Item Name</label>
    <input type="text" name="name" value="{{ item.name }}" required>

    <label style="display: block; color: var(--text-secondary); margin-top: 15px;">Average Stock (Ideal)</label>
    <input type="number" name="average_stock" value="{{ item.average_stock }}">

    <label style="display: block; color: var(--text-secondary); margin-top: 15px;">Current Stock</label>
    <input type="number" name="current_stock" value="{{ item.current_stock }}">

    <label style="display: block; color: var(--text-secondary); margin-top: 15px;">Score (Credits per unit)</label>
    <input type="number" name="score" value="{{ item.score }}">

    <button type="submit" class="btn btn-primary" style="margin-top: 20px; width: 100%;">Save Changes</button>
</form>
{% endblock %}